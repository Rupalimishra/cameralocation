{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireWildcard","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"expo-file-system","data":{"isAsync":false}},{"name":"../helpers/db","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireWildcard = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireWildcard\");\n\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.loadPlaces = exports.addPlace = exports.SET_PLACES = exports.ADD_PLACE = void 0;\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/regenerator\"));\n\n  var FileSystem = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[3], \"expo-file-system\"));\n\n  var _db = _$$_REQUIRE(_dependencyMap[4], \"../helpers/db\");\n\n  var ADD_PLACE = 'ADD_PLACE';\n  exports.ADD_PLACE = ADD_PLACE;\n  var SET_PLACES = 'SET_PLACES';\n  exports.SET_PLACES = SET_PLACES;\n\n  var addPlace = function addPlace(title, image) {\n    return function _callee(dispatch) {\n      var fileName, newPath, dbResult;\n      return _regenerator.default.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              fileName = image.split('/').pop();\n              newPath = FileSystem.documentDirectory + fileName;\n              _context.prev = 2;\n              _context.next = 5;\n              return _regenerator.default.awrap(FileSystem.moveAsync({\n                from: image,\n                to: newPath\n              }));\n\n            case 5:\n              _context.next = 7;\n              return _regenerator.default.awrap((0, _db.insertPlace)(title, newPath, 'Dummy address', 15.6, 12.3));\n\n            case 7:\n              dbResult = _context.sent;\n              console.log(dbResult);\n              dispatch({\n                type: ADD_PLACE,\n                placeData: {\n                  id: dbResult.insertId,\n                  title: title,\n                  image: newPath\n                }\n              });\n              _context.next = 16;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0);\n              throw _context.t0;\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[2, 12]], Promise);\n    };\n  };\n\n  exports.addPlace = addPlace;\n\n  var loadPlaces = function loadPlaces() {\n    return function _callee2(dispatch) {\n      var dbResult;\n      return _regenerator.default.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regenerator.default.awrap((0, _db.fetchPlaces)());\n\n            case 3:\n              dbResult = _context2.sent;\n              console.log(dbResult);\n              dispatch({\n                type: SET_PLACES,\n                places: dbResult.rows._array\n              });\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n              throw _context2.t0;\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0, 8]], Promise);\n    };\n  };\n\n  exports.loadPlaces = loadPlaces;\n});","lineCount":109,"map":[[13,0,1,0],[15,0,3,0],[17,0,5,7],[17,6,5,13,"ADD_PLACE"],[17,15,5,22],[17,18,5,25],[17,29,5,7],[19,0,6,7],[19,6,6,13,"SET_PLACES"],[19,16,6,23],[19,19,6,26],[19,31,6,7],[22,0,8,7],[22,6,8,13,"addPlace"],[22,14,8,21],[22,17,8,24],[22,26,8,13,"addPlace"],[22,34,8,24],[22,35,8,25,"title"],[22,40,8,24],[22,42,8,32,"image"],[22,47,8,24],[22,49,8,42],[23,0,9,2],[23,11,9,9],[23,28,9,15,"dispatch"],[23,36,9,9],[24,0,9,9],[25,0,9,9],[26,0,9,9],[27,0,9,9],[28,0,9,9],[29,0,10,10,"fileName"],[29,14,10,10,"fileName"],[29,22,9,9],[29,25,10,21,"image"],[29,30,10,26],[29,31,10,27,"split"],[29,36,10,21],[29,37,10,33],[29,40,10,21],[29,42,10,38,"pop"],[29,45,10,21],[29,47,9,9],[30,0,11,10,"newPath"],[30,14,11,10,"newPath"],[30,21,9,9],[30,24,11,20,"FileSystem"],[30,34,11,30],[30,35,11,31,"documentDirectory"],[30,52,11,20],[30,55,11,51,"fileName"],[30,63,9,9],[31,0,9,9],[32,0,9,9],[33,0,9,9],[33,48,14,12,"FileSystem"],[33,58,14,22],[33,59,14,23,"moveAsync"],[33,68,14,12],[33,69,14,33],[34,0,15,8,"from"],[34,16,15,8,"from"],[34,20,15,12],[34,22,15,14,"image"],[34,27,14,33],[35,0,16,8,"to"],[35,16,16,8,"to"],[35,18,16,10],[35,20,16,12,"newPath"],[36,0,14,33],[36,15,14,12],[36,16,9,9],[38,0,9,9],[39,0,9,9],[40,0,9,9],[40,48,18,29],[40,69,19,8,"title"],[40,74,18,29],[40,76,20,8,"newPath"],[40,83,18,29],[40,85,21,8],[40,100,18,29],[40,102,22,8],[40,106,18,29],[40,108,23,8],[40,112,18,29],[40,113,9,9],[42,0,9,9],[43,0,18,12,"dbResult"],[43,14,18,12,"dbResult"],[43,22,9,9],[44,0,25,6,"console"],[44,14,25,6,"console"],[44,21,25,13],[44,22,25,14,"log"],[44,25,25,6],[44,26,25,18,"dbResult"],[44,34,25,6],[45,0,26,6,"dispatch"],[45,14,26,6,"dispatch"],[45,22,26,14],[45,23,26,15],[46,0,26,17,"type"],[46,16,26,17,"type"],[46,20,26,21],[46,22,26,23,"ADD_PLACE"],[46,31,26,15],[47,0,26,34,"placeData"],[47,16,26,34,"placeData"],[47,25,26,43],[47,27,26,45],[48,0,26,47,"id"],[48,18,26,47,"id"],[48,20,26,49],[48,22,26,51,"dbResult"],[48,30,26,59],[48,31,26,60,"insertId"],[48,39,26,45],[49,0,26,70,"title"],[49,18,26,70,"title"],[49,23,26,75],[49,25,26,77,"title"],[49,30,26,45],[50,0,26,84,"image"],[50,18,26,84,"image"],[50,23,26,89],[50,25,26,91,"newPath"],[51,0,26,45],[52,0,26,15],[52,15,26,14],[52,16,26,6],[53,0,9,9],[54,0,9,9],[56,0,9,9],[57,0,9,9],[58,0,9,9],[59,0,28,6,"console"],[59,14,28,6,"console"],[59,21,28,13],[59,22,28,14,"log"],[59,25,28,6],[60,0,9,9],[62,0,9,9],[63,0,9,9],[64,0,9,9],[65,0,9,9],[66,0,9,9],[67,0,9,9],[68,0,9,9],[68,5,9,2],[69,0,32,1],[69,3,8,7],[73,0,34,7],[73,6,34,13,"loadPlaces"],[73,16,34,23],[73,19,34,26],[73,28,34,13,"loadPlaces"],[73,38,34,26],[73,41,34,32],[74,0,35,4],[74,11,35,11],[74,29,35,17,"dispatch"],[74,37,35,11],[75,0,35,11],[76,0,35,11],[77,0,35,11],[78,0,35,11],[79,0,35,11],[80,0,35,11],[81,0,35,11],[82,0,35,11],[82,48,37,35],[82,70,35,11],[84,0,35,11],[85,0,37,18,"dbResult"],[85,14,37,18,"dbResult"],[85,22,35,11],[86,0,38,12,"console"],[86,14,38,12,"console"],[86,21,38,19],[86,22,38,20,"log"],[86,25,38,12],[86,26,38,24,"dbResult"],[86,34,38,12],[87,0,39,12,"dispatch"],[87,14,39,12,"dispatch"],[87,22,39,20],[87,23,39,21],[88,0,39,23,"type"],[88,16,39,23,"type"],[88,20,39,27],[88,22,39,29,"SET_PLACES"],[88,32,39,21],[89,0,39,41,"places"],[89,16,39,41,"places"],[89,22,39,47],[89,24,39,49,"dbResult"],[89,32,39,57],[89,33,39,58,"rows"],[89,37,39,49],[89,38,39,63,"_array"],[90,0,39,21],[90,15,39,20],[90,16,39,12],[91,0,35,11],[92,0,35,11],[94,0,35,11],[95,0,35,11],[96,0,35,11],[97,0,35,11],[99,0,35,11],[100,0,35,11],[101,0,35,11],[102,0,35,11],[103,0,35,11],[104,0,35,11],[105,0,35,11],[105,5,35,4],[106,0,44,1],[106,3,34,7]],"functionMap":{"names":["<global>","addPlace","<anonymous>","loadPlaces"],"mappings":"AAA;wBCO;SCC;GDsB;CDC;0BGE;WDC;KCQ;CHC"}},"type":"js/module"}]}